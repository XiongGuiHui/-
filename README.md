# 二进制翻译
<u>龙芯实验室</u>

<u>二进制翻译项目</u>

<u>项目完成日期：2019/8/14-当前</u>

---

#### 项目说明

##### 要做什么

解决两个不同结构的语义鸿沟,在一个架构运行另一个架构设计的软件

* 指令系统差异:寄存器,标志位,系统态,字节次序
* ABI差异:不同函数之间互相调用,参数如何传递,对其要求
* OS差异:系统调用和各种服务

##### 分类

* 静态(离线),动态
* 全系统(模拟一台机器),用户进程,函数/模块

##### 例子

* qemu

* LLBT
* 等等

##### 关键技术点

* 代码识别和控制流重建
  * 二进制文件中哪些是代码,哪些是数据(静态做很困难,...怎么找目标地址)
  * 把代码分成基本块,根据跳转信息建立控制流图(难点是建立控制流图)
* 各种层次的差异处理(工作量最大的地方)
* 翻译方法
  * 源-中间-目标
  * 源-目标
  * 是否容易扩展源和目标的扩展支持?
* 性能优化
  * 寄存器分配
  * 访存优化(最难)
  * 并行
  * 动态:识别热点,分层优化(啥时候启动最高级别复杂优化?)(我们有芯片团队,有硬件支持)
  * 静态:传统编译技术(难点:边缘情况,为了正确性需要保守一些,有硬件支持就可以激进一些)
* 硬件辅助
  * transmeta,龙芯...

#### 工作条目

[rev.ng原理调研][./rev.ng原理调研/README.md]